<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Document</title>
</head>

<body>
    <section>
        <img src="assets/mountains2.png" alt="mountains" id="mountains">
        <img src="assets/clouds2.png" alt="clouds" id="clouds">
    </section>

    <section>
        <div class="border"></div>
        <div class="circle"></div>
        <div class="form-container">

            <form action="#" method="post" autocomplete="off">

                <fieldset>
                    <img src="assets/logo.svg" alt="A logo of a chess piece with viking horns on the head" id="logo">
                    <h2>You knou you want to.</h2>
                </fieldset>

                <label for="firstname"><img src="assets/account.svg" alt="Account icon"></label>
                <input type="text" name="firstname" id="firstname" placeholder="First name" required>

                <input type="text" name="lastname" id="lastname" placeholder="Last name" required>

                <label for="phone"><img src="assets/phone.svg" alt="Phone icon"></label>
                <input type="tel" name="phone" id="phone" placeholder="xxx-xxx-xxxx" pattern="(\d+){9,}" required>

                <label for="email"><img src="assets//email.svg" alt="Email icon"></label>
                <input type="email" name="email" id="email" placeholder="you@youremail.com"
                    pattern="\w+@\w+\.(com|ca|org|net)" required>

                <label for="password"><img src="assets/lock.svg" alt="Lock icon"></label>
                <input type="password" name="password" id="password" placeholder="Password" required
                    pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}">

                <label for="password"><img src="assets/lock.svg" alt="Lock icon"></label>
                <input type="password" name="confirm-password" id="confirm-password" placeholder="Confirm password"
                    required>

                <button type="submit">Create account</button>
            </form>

            <p>Already have an account? <a href="#">Log in</a></p>
        </div>
    </section>
</body>

<script>

    // Check that passwords match and have a certain degree of complexity

    const myForm = document.querySelector('form');
    const password = document.querySelector('#password');
    const confirmPassword = document.querySelector('#confirm-password');
    myForm.noValidate = true;


    Array.from(myForm.elements).forEach(i => {

        i.addEventListener('input', function (e) {

            // Customized error message to let user know the correct password format
            if (i == password) {
                if (password.validity.patternMismatch) {
                    password.setCustomValidity('Your password must be 8 characters long and contain atleast: 1 uppercase letter, 1 lowercase letter, and a number');
                    password.reportValidity();
                } else {
                    password.setCustomValidity('');
                }
            }

            if (i == confirmPassword) {
                if (confirmPassword.value != password.value) {
                    confirmPassword.setCustomValidity('The passwords do not match');
                    confirmPassword.reportValidity();
                } else {
                    confirmPassword.setCustomValidity('');
                }
            }

            // As the user interacts with any of the inputs, check their validity, if they are invalid, adjust the border color accordingly
            if (i.checkValidity()) {
                i.style.border = "1px solid green";
            }
            else {
                i.style.border = "1px solid red";
            }
        })
    })

</script>

</html>
